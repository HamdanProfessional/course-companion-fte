{"openapi":"3.1.0","info":{"title":"Course Companion FTE","description":"Zero-Backend-LLM Course Companion API - All AI in ChatGPT","version":"1.0.0"},"paths":{"/health":{"get":{"tags":["Health"],"summary":"Health Check","description":"Health check endpoint.\nZero-LLM compliance: Simple status check only.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/api/v1/chapters":{"get":{"tags":["Content","Content"],"summary":"List Chapters","description":"List all chapters (metadata only).\nZero-LLM: Returns verbatim chapter list from database.","operationId":"list_chapters_api_v1_chapters_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ChapterDetail"},"type":"array","title":"Response List Chapters Api V1 Chapters Get"}}}}}}},"/api/v1/chapters/{chapter_id}":{"get":{"tags":["Content","Content"],"summary":"Get Chapter","description":"Get full chapter content.\nZero-LLM: Returns verbatim content from database or R2.","operationId":"get_chapter_api_v1_chapters__chapter_id__get","parameters":[{"name":"chapter_id","in":"path","required":true,"schema":{"type":"string","title":"Chapter Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChapterDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chapters/{chapter_id}/next":{"get":{"tags":["Content","Content"],"summary":"Get Next Chapter","description":"Get next chapter in sequence.\nZero-LLM: Returns next chapter or null if last chapter.","operationId":"get_next_chapter_api_v1_chapters__chapter_id__next_get","parameters":[{"name":"chapter_id","in":"path","required":true,"schema":{"type":"string","title":"Chapter Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChapterDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chapters/{chapter_id}/previous":{"get":{"tags":["Content","Content"],"summary":"Get Previous Chapter","description":"Get previous chapter in sequence.\nZero-LLM: Returns previous chapter or null if first chapter.","operationId":"get_previous_chapter_api_v1_chapters__chapter_id__previous_get","parameters":[{"name":"chapter_id","in":"path","required":true,"schema":{"type":"string","title":"Chapter Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChapterDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/search":{"get":{"tags":["Content","Content"],"summary":"Search Content","description":"Search course content.\nZero-LLM: Keyword-based search with pre-computed relevance scores.\nNo real-time embedding generation or LLM processing.","operationId":"search_content_api_v1_search_get","parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","title":"Q"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/quizzes":{"get":{"tags":["Quiz","Quiz"],"summary":"List Quizzes","description":"List all quizzes.\nZero-LLM: Returns verbatim quiz list from database.","operationId":"list_quizzes_api_v1_quizzes_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/QuizWithQuestions"},"type":"array","title":"Response List Quizzes Api V1 Quizzes Get"}}}}}}},"/api/v1/quizzes/{quiz_id}":{"get":{"tags":["Quiz","Quiz"],"summary":"Get Quiz","description":"Get quiz with questions (without correct answers).\nZero-LLM: Returns verbatim quiz questions from database.","operationId":"get_quiz_api_v1_quizzes__quiz_id__get","parameters":[{"name":"quiz_id","in":"path","required":true,"schema":{"type":"string","title":"Quiz Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuizWithQuestions"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/quizzes/{quiz_id}/submit":{"post":{"tags":["Quiz","Quiz"],"summary":"Submit Quiz","description":"Submit quiz answers for grading.\nZero-LLM: Rule-based grading using answer keys (no AI evaluation).\nCompares submitted answers to pre-defined correct answers.","operationId":"submit_quiz_api_v1_quizzes__quiz_id__submit_post","parameters":[{"name":"quiz_id","in":"path","required":true,"schema":{"type":"string","title":"Quiz Id"}},{"name":"user_id","in":"query","required":true,"schema":{"type":"string","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuizSubmission"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuizResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/quizzes/{quiz_id}/results":{"get":{"tags":["Quiz","Quiz"],"summary":"Get Quiz Results","description":"Get user's quiz attempt history.\nZero-LLM: Returns verbatim attempt history from database.","operationId":"get_quiz_results_api_v1_quizzes__quiz_id__results_get","parameters":[{"name":"quiz_id","in":"path","required":true,"schema":{"type":"string","title":"Quiz Id"}},{"name":"user_id","in":"query","required":true,"schema":{"type":"string","title":"User Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/progress/{user_id}":{"get":{"tags":["Progress","Progress"],"summary":"Get Progress","description":"Get user's learning progress.\nZero-LLM: Returns verbatim progress data with calculated completion percentage.","operationId":"get_progress_api_v1_progress__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Progress"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Progress","Progress"],"summary":"Update Progress","description":"Mark chapter as complete and update progress.\nZero-LLM: Adds chapter to completed list and recalculates percentage.","operationId":"update_progress_api_v1_progress__user_id__put","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProgressUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Progress"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/streaks/{user_id}":{"get":{"tags":["Progress","Progress"],"summary":"Get Streak","description":"Get user's streak information.\nZero-LLM: Returns verbatim streak data from database.","operationId":"get_streak_api_v1_streaks__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Streak"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/streaks/{user_id}/checkin":{"post":{"tags":["Progress","Progress"],"summary":"Record Checkin","description":"Record daily activity checkin.\nZero-LLM: Deterministic calculation based on last checkin date.\n- Same day: No change\n- Consecutive day: Increment streak\n- Gap > 1 day: Reset streak","operationId":"record_checkin_api_v1_streaks__user_id__checkin_post","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Streak"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/access/check":{"post":{"tags":["Access","Access"],"summary":"Check Access","description":"Check if user has access to resource.\nZero-LLM: Rule-based enforcement (free tier = chapters 1-3 only).","operationId":"check_access_api_v1_access_check_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccessCheck"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/user/{user_id}/tier":{"get":{"tags":["Access","Access"],"summary":"Get User Tier","description":"Get user's current subscription tier.\nZero-LLM: Returns verbatim tier from database.","operationId":"get_user_tier_api_v1_user__user_id__tier_get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/access/upgrade":{"post":{"tags":["Access","Access"],"summary":"Upgrade Tier","description":"Upgrade user to new subscription tier.\nZero-LLM: Simple database update (payment integration would be separate).","operationId":"upgrade_tier_api_v1_access_upgrade_post","parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"string","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserTierUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TierUpdateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sse":{"get":{"tags":["MCP","SSE","MCP","SSE"],"summary":"Mcp Sse","description":"MCP SSE endpoint for streaming (for backwards compatibility).","operationId":"mcp_sse_api_v1_sse_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}},"post":{"tags":["MCP","SSE","MCP","SSE"],"summary":"Mcp Post","description":"Handle MCP JSON-RPC POST requests from ChatGPT.","operationId":"mcp_post_api_v1_sse_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/adaptive/analysis":{"get":{"tags":["Adaptive Learning (Phase 2)","Adaptive Learning (Phase 2)"],"summary":"Analyze knowledge gaps from quiz performance","description":"Uses LLM to identify weak and strong topics based on quiz history","operationId":"get_knowledge_analysis_api_v1_adaptive_analysis_get","parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"string","format":"uuid","description":"User UUID","title":"User Id"},"description":"User UUID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeGapResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/adaptive/recommendations":{"get":{"tags":["Adaptive Learning (Phase 2)","Adaptive Learning (Phase 2)"],"summary":"Get personalized chapter recommendations","description":"Uses LLM to recommend optimal next chapter based on performance","operationId":"get_recommendations_api_v1_adaptive_recommendations_get","parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"string","format":"uuid","description":"User UUID","title":"User Id"},"description":"User UUID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChapterRecommendationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/adaptive/path":{"post":{"tags":["Adaptive Learning (Phase 2)","Adaptive Learning (Phase 2)"],"summary":"Generate personalized learning path","description":"Creates optimized chapter sequence based on goals and time constraints","operationId":"create_learning_path_api_v1_adaptive_path_post","parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"string","format":"uuid","description":"User UUID","title":"User Id"},"description":"User UUID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LearningPathRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LearningPathResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/adaptive/status":{"get":{"tags":["Adaptive Learning (Phase 2)","Adaptive Learning (Phase 2)"],"summary":"Check Phase 2 LLM feature status","description":"Check if Phase 2 adaptive learning features are enabled.\n\nReturns configuration and provider information.","operationId":"get_adaptive_status_api_v1_adaptive_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/quizzes/{quiz_id}/grade-llm":{"post":{"tags":["Quiz (Phase 2)","Quiz (Phase 2)"],"summary":"Submit quiz for LLM grading","description":"Grade quiz with LLM-powered open-ended question evaluation","operationId":"submit_quiz_llm_api_v1_quizzes__quiz_id__grade_llm_post","parameters":[{"name":"quiz_id","in":"path","required":true,"schema":{"type":"string","title":"Quiz Id"}},{"name":"user_id","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LLMQuizSubmission"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LLMQuizResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/quizzes/{quiz_id}/insights":{"get":{"tags":["Quiz (Phase 2)","Quiz (Phase 2)"],"summary":"Get quiz performance insights","description":"AI analyzes quiz attempts to provide learning insights","operationId":"get_quiz_insights_api_v1_quizzes__quiz_id__insights_get","parameters":[{"name":"quiz_id","in":"path","required":true,"schema":{"type":"string","title":"Quiz Id"}},{"name":"user_id","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuizInsightsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/quizzes/llm/status":{"get":{"tags":["Quiz (Phase 2)","Quiz (Phase 2)"],"summary":"Check LLM quiz grading status","description":"Check if LLM quiz grading features are enabled.","operationId":"get_quiz_llm_status_api_v1_quizzes_llm_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/costs/{user_id}":{"get":{"tags":["Cost Tracking (Phase 2)","Cost Tracking (Phase 2)"],"summary":"Get user's LLM costs","description":"Retrieve LLM API costs for a specific user","operationId":"get_user_cost_endpoint_api_v1_costs__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}},{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Number of days to look back","default":30,"title":"Days"},"description":"Number of days to look back"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCostResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/costs/summary/total":{"get":{"tags":["Cost Tracking (Phase 2)","Cost Tracking (Phase 2)"],"summary":"Get total LLM costs (admin)","description":"Retrieve total LLM API costs across all users","operationId":"get_total_cost_endpoint_api_v1_costs_summary_total_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Number of days to look back","default":30,"title":"Days"},"description":"Number of days to look back"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TotalCostResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/costs/top-users":{"get":{"tags":["Cost Tracking (Phase 2)","Cost Tracking (Phase 2)"],"summary":"Get top users by LLM usage (admin)","description":"Retrieve users with highest LLM costs","operationId":"get_top_users_endpoint_api_v1_costs_top_users_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Number of days to look back","default":30,"title":"Days"},"description":"Number of days to look back"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Maximum users to return","default":10,"title":"Limit"},"description":"Maximum users to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TopUsersResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/costs/status":{"get":{"tags":["Cost Tracking (Phase 2)","Cost Tracking (Phase 2)"],"summary":"Check cost tracking status","description":"Check if cost tracking is enabled.\n\nReturns configuration information.","operationId":"get_cost_tracking_status_api_v1_costs_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"tags":["Root"],"summary":"Root","description":"Root endpoint with API information.\nZero-LLM compliance: Static information only.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AccessCheck":{"properties":{"user_id":{"type":"string","format":"uuid","title":"User Id"},"resource":{"type":"string","title":"Resource","description":"Resource to check access for (e.g., 'chapter-4')"}},"type":"object","required":["user_id","resource"],"title":"AccessCheck","description":"Schema for access check request."},"AccessResponse":{"properties":{"access_granted":{"type":"boolean","title":"Access Granted"},"tier":{"$ref":"#/components/schemas/UserTier"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"},"upgrade_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Upgrade Url"}},"type":"object","required":["access_granted","tier"],"title":"AccessResponse","description":"Schema for access check response."},"AnswerChoice":{"type":"string","enum":["A","B","C","D"],"title":"AnswerChoice","description":"Multiple choice answer options."},"ChapterDetail":{"properties":{"title":{"type":"string","title":"Title"},"order":{"type":"integer","title":"Order"},"difficulty_level":{"$ref":"#/components/schemas/DifficultyLevel"},"estimated_time":{"type":"integer","title":"Estimated Time"},"id":{"type":"string","format":"uuid","title":"Id"},"content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content"},"r2_content_key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"R2 Content Key"},"quiz_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Quiz Id"}},"type":"object","required":["title","order","difficulty_level","estimated_time","id"],"title":"ChapterDetail","description":"Schema for chapter detail (full content)."},"ChapterPathItem":{"properties":{"chapter_id":{"type":"string","title":"Chapter Id","description":"Chapter ID"},"title":{"type":"string","title":"Title","description":"Chapter title"},"order":{"type":"integer","title":"Order","description":"Order in path (1-based)"},"estimated_minutes":{"type":"integer","title":"Estimated Minutes","description":"Estimated completion time"},"reason":{"type":"string","title":"Reason","description":"Why this chapter is included"}},"type":"object","required":["chapter_id","title","order","estimated_minutes","reason"],"title":"ChapterPathItem","description":"Single chapter in learning path."},"ChapterRecommendationResponse":{"properties":{"next_chapter_id":{"type":"string","title":"Next Chapter Id","description":"ID of recommended next chapter"},"next_chapter_title":{"type":"string","title":"Next Chapter Title","description":"Title of recommended next chapter"},"reason":{"type":"string","title":"Reason","description":"Explanation of why this chapter is recommended"},"alternative_paths":{"items":{"type":"object"},"type":"array","title":"Alternative Paths","description":"Alternative chapter options with reasons"},"estimated_completion_minutes":{"type":"integer","title":"Estimated Completion Minutes","description":"Estimated time to complete the chapter"},"difficulty_match":{"type":"string","title":"Difficulty Match","description":"How well difficulty matches student's level"}},"type":"object","required":["next_chapter_id","next_chapter_title","reason","alternative_paths","estimated_completion_minutes","difficulty_match"],"title":"ChapterRecommendationResponse","description":"Personalized chapter recommendation response."},"DifficultyLevel":{"type":"string","enum":["BEGINNER","INTERMEDIATE","ADVANCED"],"title":"DifficultyLevel","description":"Content difficulty levels."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthResponse":{"properties":{"status":{"type":"string","title":"Status"},"version":{"type":"string","title":"Version"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["status","version","timestamp"],"title":"HealthResponse","description":"Schema for health check response."},"KnowledgeGapResponse":{"properties":{"weak_topics":{"items":{"type":"string"},"type":"array","title":"Weak Topics","description":"Topics where student needs improvement (<70% score)"},"strong_topics":{"items":{"type":"string"},"type":"array","title":"Strong Topics","description":"Topics where student excels (>85% score)"},"recommended_review":{"items":{"type":"string"},"type":"array","title":"Recommended Review","description":"Chapter IDs recommended for review"},"confidence_score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Confidence Score","description":"Confidence in analysis (0-1, based on data amount)"},"explanation":{"type":"string","title":"Explanation","description":"Human-readable explanation of the analysis"}},"type":"object","required":["weak_topics","strong_topics","recommended_review","confidence_score","explanation"],"title":"KnowledgeGapResponse","description":"Knowledge gap analysis response."},"LLMGradedQuestionResult":{"properties":{"question_id":{"type":"string","title":"Question Id","description":"Question ID"},"score":{"type":"integer","minimum":0.0,"title":"Score","description":"Points earned"},"max_score":{"type":"integer","minimum":1.0,"title":"Max Score","description":"Maximum points"},"feedback":{"type":"string","title":"Feedback","description":"Detailed feedback"},"corrections":{"items":{"type":"string"},"type":"array","title":"Corrections","description":"Corrections to misconceptions"},"strengths":{"items":{"type":"string"},"type":"array","title":"Strengths","description":"What student did well"},"suggestions":{"items":{"type":"string"},"type":"array","title":"Suggestions","description":"Improvement suggestions"}},"type":"object","required":["question_id","score","max_score","feedback","corrections","strengths","suggestions"],"title":"LLMGradedQuestionResult","description":"Result for LLM-graded open-ended question."},"LLMQuizResult":{"properties":{"quiz_id":{"type":"string","title":"Quiz Id","description":"Quiz ID"},"total_score":{"type":"integer","title":"Total Score","description":"Total points earned"},"max_score":{"type":"integer","title":"Max Score","description":"Maximum possible points"},"percentage":{"type":"number","title":"Percentage","description":"Score percentage"},"passed":{"type":"boolean","title":"Passed","description":"Whether student passed (>=70%)"},"multiple_choice_results":{"additionalProperties":{"type":"object"},"type":"object","title":"Multiple Choice Results","description":"Results for multiple-choice questions"},"llm_graded_results":{"items":{"$ref":"#/components/schemas/LLMGradedQuestionResult"},"type":"array","title":"Llm Graded Results","description":"Results for LLM-graded open-ended questions"},"summary":{"type":"string","title":"Summary","description":"Overall feedback summary"},"graded_by":{"type":"string","title":"Graded By","description":"Grading method","default":"llm"}},"type":"object","required":["quiz_id","total_score","max_score","percentage","passed","multiple_choice_results","llm_graded_results","summary"],"title":"LLMQuizResult","description":"LLM-graded quiz result."},"LLMQuizSubmission":{"properties":{"answers":{"type":"object","title":"Answers","description":"Question ID -> Answer mapping. Can be multiple choice (A/B/C/D) or open-ended text."}},"type":"object","required":["answers"],"title":"LLMQuizSubmission","description":"Quiz submission with open-ended answers."},"LearningPathMilestone":{"properties":{"week":{"type":"integer","title":"Week","description":"Week number (1-based)"},"chapters":{"items":{"type":"string"},"type":"array","title":"Chapters","description":"Chapter IDs to complete this week"},"goal":{"type":"string","title":"Goal","description":"Learning goal for this week"},"total_hours":{"type":"number","title":"Total Hours","description":"Total hours needed this week"}},"type":"object","required":["week","chapters","goal","total_hours"],"title":"LearningPathMilestone","description":"Milestone in learning path."},"LearningPathRequest":{"properties":{"learning_goals":{"items":{"type":"string"},"type":"array","maxItems":10,"minItems":1,"title":"Learning Goals","description":"Student's learning objectives"},"available_time_hours":{"type":"integer","maximum":40.0,"minimum":1.0,"title":"Available Time Hours","description":"Hours per week available for learning","default":5}},"type":"object","required":["learning_goals"],"title":"LearningPathRequest","description":"Request to generate personalized learning path."},"LearningPathResponse":{"properties":{"path":{"items":{"$ref":"#/components/schemas/ChapterPathItem"},"type":"array","title":"Path","description":"Optimized chapter sequence"},"milestones":{"items":{"$ref":"#/components/schemas/LearningPathMilestone"},"type":"array","title":"Milestones","description":"Weekly milestones and goals"},"total_hours":{"type":"number","title":"Total Hours","description":"Total hours to complete path"},"rationale":{"type":"string","title":"Rationale","description":"Explanation of path design decisions"}},"type":"object","required":["path","milestones","total_hours","rationale"],"title":"LearningPathResponse","description":"Personalized learning path response."},"Progress":{"properties":{"completed_chapters":{"items":{"type":"string"},"type":"array","title":"Completed Chapters","description":"List of completed chapter IDs"},"current_chapter_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Current Chapter Id"},"id":{"type":"string","format":"uuid","title":"Id"},"user_id":{"type":"string","format":"uuid","title":"User Id"},"completion_percentage":{"type":"number","title":"Completion Percentage","description":"Percentage of course completed"},"last_activity":{"type":"string","format":"date-time","title":"Last Activity"}},"type":"object","required":["id","user_id","completion_percentage","last_activity"],"title":"Progress","description":"Schema for progress response."},"ProgressUpdate":{"properties":{"chapter_id":{"type":"string","format":"uuid","title":"Chapter Id","description":"Chapter ID to mark as complete"}},"type":"object","required":["chapter_id"],"title":"ProgressUpdate","description":"Schema for updating progress."},"Question":{"properties":{"question_text":{"type":"string","title":"Question Text"},"options":{"additionalProperties":{"type":"string"},"type":"object","title":"Options","description":"Multiple choice options (A, B, C, D)"},"explanation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Explanation"},"order":{"type":"integer","title":"Order"},"id":{"type":"string","format":"uuid","title":"Id"},"quiz_id":{"type":"string","format":"uuid","title":"Quiz Id"}},"type":"object","required":["question_text","options","order","id","quiz_id"],"title":"Question","description":"Schema for question response (without correct answer)."},"QuizInsightsResponse":{"properties":{"attempts_analyzed":{"type":"integer","title":"Attempts Analyzed","description":"Number of quiz attempts analyzed"},"average_score":{"type":"number","title":"Average Score","description":"Average score across attempts"},"improvement":{"type":"number","title":"Improvement","description":"Score change from first to last attempt"},"trend":{"type":"string","title":"Trend","description":"Performance trend (improving/stable/declining)"},"strengths":{"items":{"type":"string"},"type":"array","title":"Strengths","description":"Identified strengths"},"focus_areas":{"items":{"type":"string"},"type":"array","title":"Focus Areas","description":"Areas needing improvement"},"recommendations":{"items":{"type":"string"},"type":"array","title":"Recommendations","description":"Personalized recommendations"},"encouragement":{"type":"string","title":"Encouragement","description":"Encouraging message"}},"type":"object","required":["attempts_analyzed","average_score","improvement","trend","strengths","focus_areas","recommendations","encouragement"],"title":"QuizInsightsResponse","description":"Quiz performance insights."},"QuizResult":{"properties":{"quiz_id":{"type":"string","format":"uuid","title":"Quiz Id"},"score":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Score","description":"Score as percentage (0-100)"},"passed":{"type":"boolean","title":"Passed","description":"Passed if score >= 70%"},"total_questions":{"type":"integer","title":"Total Questions"},"correct_answers":{"type":"integer","title":"Correct Answers"},"results":{"items":{"$ref":"#/components/schemas/QuizResultItem"},"type":"array","title":"Results"}},"type":"object","required":["quiz_id","score","passed","total_questions","correct_answers","results"],"title":"QuizResult","description":"Schema for quiz grading result."},"QuizResultItem":{"properties":{"question_id":{"type":"string","format":"uuid","title":"Question Id"},"question_text":{"type":"string","title":"Question Text"},"selected_answer":{"$ref":"#/components/schemas/AnswerChoice"},"correct_answer":{"$ref":"#/components/schemas/AnswerChoice"},"is_correct":{"type":"boolean","title":"Is Correct"},"explanation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Explanation"}},"type":"object","required":["question_id","question_text","selected_answer","correct_answer","is_correct"],"title":"QuizResultItem","description":"Schema for individual question result."},"QuizSubmission":{"properties":{"answers":{"additionalProperties":{"$ref":"#/components/schemas/AnswerChoice"},"type":"object","title":"Answers","description":"Map of question_id to selected answer"}},"type":"object","required":["answers"],"title":"QuizSubmission","description":"Schema for submitting quiz answers."},"QuizWithQuestions":{"properties":{"title":{"type":"string","title":"Title"},"difficulty":{"allOf":[{"$ref":"#/components/schemas/DifficultyLevel"}],"default":"BEGINNER"},"id":{"type":"string","format":"uuid","title":"Id"},"chapter_id":{"type":"string","format":"uuid","title":"Chapter Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"questions":{"items":{"$ref":"#/components/schemas/Question"},"type":"array","title":"Questions"}},"type":"object","required":["title","id","chapter_id","created_at","questions"],"title":"QuizWithQuestions","description":"Schema for quiz with questions."},"SearchResponse":{"properties":{"query":{"type":"string","title":"Query"},"results":{"items":{"$ref":"#/components/schemas/SearchResult"},"type":"array","title":"Results"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["query","results","total"],"title":"SearchResponse","description":"Schema for search response."},"SearchResult":{"properties":{"chapter_id":{"type":"string","format":"uuid","title":"Chapter Id"},"title":{"type":"string","title":"Title"},"snippet":{"type":"string","title":"Snippet","description":"Relevant content snippet"},"relevance_score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Relevance Score"}},"type":"object","required":["chapter_id","title","snippet","relevance_score"],"title":"SearchResult","description":"Schema for search result item."},"Streak":{"properties":{"current_streak":{"type":"integer","minimum":0.0,"title":"Current Streak","default":0},"longest_streak":{"type":"integer","minimum":0.0,"title":"Longest Streak","default":0},"last_checkin":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Last Checkin"},"id":{"type":"string","format":"uuid","title":"Id"},"user_id":{"type":"string","format":"uuid","title":"User Id"}},"type":"object","required":["id","user_id"],"title":"Streak","description":"Schema for streak response."},"TierUpdateResponse":{"properties":{"user_id":{"type":"string","format":"uuid","title":"User Id"},"old_tier":{"$ref":"#/components/schemas/UserTier"},"new_tier":{"$ref":"#/components/schemas/UserTier"},"upgraded_at":{"type":"string","format":"date-time","title":"Upgraded At"}},"type":"object","required":["user_id","old_tier","new_tier","upgraded_at"],"title":"TierUpdateResponse","description":"Schema for tier update response."},"TopUsersResponse":{"properties":{"period_days":{"type":"integer","title":"Period Days","description":"Period covered (days)"},"top_users":{"items":{},"type":"array","title":"Top Users","description":"List of top users"}},"type":"object","required":["period_days","top_users"],"title":"TopUsersResponse","description":"Top users by cost."},"TotalCostResponse":{"properties":{"period_days":{"type":"integer","title":"Period Days","description":"Period covered (days)"},"total_cost_usd":{"type":"number","title":"Total Cost Usd","description":"Total cost in USD"},"total_tokens":{"type":"integer","title":"Total Tokens","description":"Total tokens used"},"total_calls":{"type":"integer","title":"Total Calls","description":"Total API calls"},"unique_users":{"type":"integer","title":"Unique Users","description":"Number of unique users"},"average_cost_per_user":{"type":"number","title":"Average Cost Per User","description":"Average cost per user"},"feature_breakdown":{"type":"object","title":"Feature Breakdown","description":"Breakdown by feature"}},"type":"object","required":["period_days","total_cost_usd","total_tokens","total_calls","unique_users","average_cost_per_user","feature_breakdown"],"title":"TotalCostResponse","description":"Total cost summary (admin)."},"UserCostResponse":{"properties":{"user_id":{"type":"string","title":"User Id","description":"User UUID"},"period_days":{"type":"integer","title":"Period Days","description":"Period covered (days)"},"total_cost_usd":{"type":"number","title":"Total Cost Usd","description":"Total cost in USD"},"total_tokens":{"type":"integer","title":"Total Tokens","description":"Total tokens used"},"total_calls":{"type":"integer","title":"Total Calls","description":"Total API calls"},"feature_breakdown":{"type":"object","title":"Feature Breakdown","description":"Breakdown by feature"}},"type":"object","required":["user_id","period_days","total_cost_usd","total_tokens","total_calls","feature_breakdown"],"title":"UserCostResponse","description":"User cost summary."},"UserTier":{"type":"string","enum":["FREE","PREMIUM","PRO"],"title":"UserTier","description":"User subscription tiers."},"UserTierUpdate":{"properties":{"new_tier":{"allOf":[{"$ref":"#/components/schemas/UserTier"}],"description":"New subscription tier"}},"type":"object","required":["new_tier"],"title":"UserTierUpdate","description":"Schema for updating user tier."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}